<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>유튜브 영상 갤러리</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            border-color: #4285f4;
        }

        .search-box::placeholder {
            color: #999;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .video-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .video-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .video-title {
            padding: 16px;
            font-size: 14px;
            line-height: 1.4;
            color: #333;
            min-height: 60px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        @media (max-width: 768px) {
            .video-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .video-grid {
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>블록코딩 웹 에디터 영상 가이드</h1>
        <div class="search-container">
            <input 
                type="text" 
                id="searchBox" 
                class="search-box" 
                placeholder="영상 제목으로 검색하세요..."
            >
        </div>
        <div class="video-grid" id="videoGrid"></div>
    </div>

    <script>
        // ============================================
        // 여기에 유튜브 영상 링크를 추가하세요
        // 가장 아래 링크가 왼쪽 위에 표시됩니다
        // ============================================
        const videoLinks = [
            'https://youtu.be/4l8Tvx0DMzA',
            'https://youtu.be/geNHpgquBbs',
            'https://youtu.be/uPVX7-pZXbo',
            'https://youtu.be/Xz90THW0h8Y',
            'https://youtu.be/4l8Tvx0DMzA',
            'https://youtu.be/fohcrXpx5nQ',
            'https://youtu.be/4nllp1w_vN4'
            // 새로운 영상 링크를 여기에 추가하세요
        ];
        // ============================================

        // YouTube 비디오 ID 추출 함수
        function extractVideoId(url) {
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/,
                /youtube\.com\/embed\/([^&\n?#]+)/,
                /youtube\.com\/v\/([^&\n?#]+)/
            ];
            
            for (let pattern of patterns) {
                const match = url.match(pattern);
                if (match && match[1]) {
                    return match[1];
                }
            }
            return null;
        }

        // YouTube API로 비디오 제목 가져오기
        async function getVideoTitle(videoId) {
            try {
                const response = await fetch(
                    `https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`
                );
                const data = await response.json();
                return data.title;
            } catch (error) {
                console.error('제목을 가져오는데 실패했습니다:', error);
                return '제목을 불러올 수 없습니다';
            }
        }

        // 비디오 카드 생성
        async function createVideoCard(url) {
            const videoId = extractVideoId(url);
            if (!videoId) {
                console.error('유효하지 않은 YouTube URL:', url);
                return null;
            }

            const card = document.createElement('div');
            card.className = 'video-card';
            
            // 임베드 iframe 생성
            card.innerHTML = `
                <div class="video-wrapper">
                    <iframe 
                        src="https://www.youtube.com/embed/${videoId}" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="video-title">
                    <div class="loading">제목 불러오는 중...</div>
                </div>
            `;

            // 제목 가져오기
            const title = await getVideoTitle(videoId);
            const titleElement = card.querySelector('.video-title');
            titleElement.textContent = title;
            
            // 검색을 위해 제목을 데이터 속성으로 저장
            card.dataset.title = title.toLowerCase();

            return card;
        }

        // 모든 비디오 카드 저장용 배열
        let allVideoCards = [];

        // 페이지 초기화
        async function initializeGallery() {
            const grid = document.getElementById('videoGrid');
            
            // 배열을 역순으로 처리 (가장 아래 링크가 먼저 표시됨)
            const reversedLinks = [...videoLinks].reverse();
            
            for (const link of reversedLinks) {
                const card = await createVideoCard(link);
                if (card) {
                    allVideoCards.push(card);
                    grid.appendChild(card);
                }
            }
            
            // 검색 기능 초기화
            initializeSearch();
        }

        // 검색 기능 초기화
        function initializeSearch() {
            const searchBox = document.getElementById('searchBox');
            const grid = document.getElementById('videoGrid');
            
            searchBox.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                // 그리드 비우기
                grid.innerHTML = '';
                
                if (searchTerm === '') {
                    // 검색어가 없으면 모든 카드 표시
                    allVideoCards.forEach(card => {
                        card.style.display = '';
                        grid.appendChild(card);
                    });
                } else {
                    // 검색어가 있으면 필터링해서 표시
                    allVideoCards.forEach(card => {
                        const title = card.dataset.title;
                        if (title.includes(searchTerm)) {
                            card.style.display = '';
                            grid.appendChild(card);
                        }
                    });
                }
            });
        }

        // 페이지 로드 시 실행
        initializeGallery();
    </script>
</body>
</html>